---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import CMSSections from "../components/CMSSections.astro";

export async function getStaticPaths() {
	const pages = await getCollection("pages");
	return pages.map((page) => ({
		params: { slug: page.id },
		props: { page },
	}));
}

const { page } = Astro.props;
const { name, sections } = page.data;
---

<Layout title={name}>
	<CMSSections sections={sections} />
</Layout>
